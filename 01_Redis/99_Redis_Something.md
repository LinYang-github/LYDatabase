### redis是什么 ###

Redis是一个开源的，内存中的数据结构存储系统，可以用作数据库、缓存和消息中间件。

##

### Redis特点 ###

1. 一个key-value类型的内存数据库，和memcached有点像，整个数据库都是在内存中进行加载操作，定期通过异步操作把数据库数据flush到硬盘上进行保存。性能很高，目前已知性能最快的key-value DB
2. 除性能外，支持保存多种数据结构，单个value的最大限制使1GB（memcached是1MB）。应用：用它的list来做FIFO双向链表，实现一个轻量级的高性能消息队列服务，用他的set可以做高性能的tag系统等等
3. 对存入的key-value设置expire时间，可被当做一个功能加强版的memcached来用
4. 缺陷：数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis比较适合那些局限在较小数据量的高性能操作和运算上

##

### Redis好处 ###

1. 速度快。因为数据存在内存中，类似于HashMap，HashMap查找和操作的时间复杂度都是O(1)
2. 支持丰富数据类型
3. 支持事务，操作都是原子性。原子性：对数据的更改要么全部执行，要么全部不执行
4. 丰富的特性。可用于缓存，消息，按key设置过期时间，过期后将自动删除

##
### 相比memcached ###

1. memcached所有的值都是简单的字符串，redis数据类型更丰富
2. 速度更快
3. 可以持久化其数据

##
### Redis是单进程单线程的 ###
redis利用队列技术将并发访问变为串行访问，消除了传统数据库串行控制的开销

##
### 并发竞争问题 ###
redis本身没有锁的概念，redis对于多个客户端连接并不存在竞争，但是在jedis客户端对redis进行并发访问时会发生连接抄书、数据转换错误、阻塞、客户端关闭连接等问题，这些问题均是由于客户端连接混乱造成的，解决方法：
1. 客户端角度，为保证每个客户端间正常有序与redis进行通信，对连接进行池化，同时对客户端读写redis操作采用内部锁synchronized
2. 服务器角度，利用setnx实现锁
注：第一种，需要应用程序自己处理资源的同步，可以使用的方法比较通俗，可以使用synchronized也可以使用lock；第二种，需要用到redis的setnx命令

##
### 持久化的几种方式 ###
1. 快照(snapshots)   
   缺省情况下，Redis把数据快照存放在磁盘上的二进制文件中，文件名为dump.rdb。可以配置redis的持久化策略，例如数据集中每N秒钟有超过M次更新，就将数据写入磁盘，或者手工调用SAVE或BGSAVE
2. AOF(Append-only)
3. 虚拟内存方式